services:
  - type: web
    name: whisper-service
    env: python
    pythonVersion: "3.11"
    buildCommand: pip install --upgrade pip && pip install -r requirements.txt
    startCommand: uvicorn app:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: WHISPER_MODEL
        value: small
      - key: WHISPER_DEVICE
        value: cpu
      - key: WHISPER_COMPUTE_TYPE
        value: int8
      - key: MAX_VIDEO_DURATION
        value: 900
      - key: REQUEST_TIMEOUT
        value: 600
      - key: TEMP_DIR
        value: /tmp/whisper-service
      - key: ENV
        value: production

